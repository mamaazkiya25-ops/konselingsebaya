<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TopOne Care</title>

<style>
body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #ff8fb1, #7ecbff);
    min-height: 100vh;
    color: #333;
}

header {
    background: rgba(255,255,255,0.9);
    padding: 15px;
    text-align: center;
    font-weight: bold;
    font-size: 22px;
}

.container {
    padding: 15px;
}

.card {
    background: white;
    border-radius: 15px;
    padding: 15px;
    margin-bottom: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

button {
    background: linear-gradient(135deg, #ff6fa1, #5ab9ff);
    border: none;
    padding: 12px;
    width: 100%;
    border-radius: 10px;
    color: white;
    font-size: 16px;
    cursor: pointer;
}

textarea, input {
    width: 100%;
    padding: 10px;
    border-radius: 10px;
    border: 1px solid #ccc;
    margin-top: 8px;
}

.hidden {
    display: none;
}

.nav {
    display: flex;
    gap: 10px;
}

.nav button {
    flex: 1;
    font-size: 14px;
}
</style>
</head>

<body>

<header>TopOne Care üíôüíó</header>

<div class="container">

<!-- PILIH MODE -->
<div id="modeSelect" class="card">
    <h3>Pilih Masuk Sebagai</h3>
    <button onclick="openKonseli()">Konseli</button><br><br>
    <button onclick="openKonselor()">Konselor</button>
</div>

<!-- ================== KONSELI ================== -->
<div id="konseli" class="hidden">

<div class="nav">
<button onclick="showKonseli('home')">Beranda</button>
<button onclick="showKonseli('konsul')">Konsul</button>
<button onclick="showKonseli('riwayat')">Riwayat</button>
</div>

<!-- Beranda -->
<div id="kHome" class="card">
    <h3>Selamat Datang ü§ç</h3>
    <p id="motivasi"></p>
    <button onclick="showKonseli('konsul')">Mulai Curhat</button>
</div>

<!-- Konsul -->
<div id="kKonsul" class="card hidden">
    <h3>Curhat Anonim</h3>
    <textarea id="curhatText" placeholder="Ceritakan perasaanmu..."></textarea>
    <button onclick="kirimCurhat()">Kirim</button>
</div>

<!-- Riwayat -->
<div id="kRiwayat" class="card hidden">
    <h3>Riwayat Konsul</h3>
    <div id="riwayatList"></div>
</div>

</div>

<!-- ================== KONSELOR ================== -->
<div id="konselor" class="hidden">

<div id="loginKonselor" class="card">
    <h3>Login Konselor</h3>
    <input type="password" id="password">
    <button onclick="login()">Masuk</button>
</div>

<div id="panelKonselor" class="hidden">

<div class="card">
<h3>Statistik</h3>
<p id="statistik"></p>
</div>

<div class="card">
<h3>Pesan Masuk</h3>
<div id="pesanMasuk"></div>
</div>

</div>
</div>

</div>

<script>
const COUNSELOR_PASSWORD = "pikrtopone";

const motivasiList = [
" Kamu tidak sendiri ü§ç",
" Perasaanmu valid ",
" Berani bercerita itu kuat ",
" Kami ada untukmu ",
" Kamu berharga "
];

document.getElementById("motivasi").innerText =
motivasiList[Math.floor(Math.random()*motivasiList.length)];

function openKonseli(){
modeSelect.style.display="none";
konseli.classList.remove("hidden");
loadRiwayat();
}

function openKonselor(){
modeSelect.style.display="none";
konselor.classList.remove("hidden");
}

function showKonseli(menu){
kHome.classList.add("hidden");
kKonsul.classList.add("hidden");
kRiwayat.classList.add("hidden");

if(menu=="home") kHome.classList.remove("hidden");
if(menu=="konsul") kKonsul.classList.remove("hidden");
if(menu=="riwayat"){ loadRiwayat(); kRiwayat.classList.remove("hidden");}
}

function kirimCurhat(){
let text = curhatText.value;
if(!text) return alert("Isi curhat dulu ya ü§ç");

let data = JSON.parse(localStorage.getItem("curhat")||"[]");
data.push({
id: Date.now(),
pesan: text,
jawaban: "",
waktu: Date.now()
});
localStorage.setItem("curhat", JSON.stringify(data));
curhatText.value="";
alert("Curhat terkirim ü§ç");
}

function loadRiwayat(){
let list = document.getElementById("riwayatList");
list.innerHTML="";
let data = JSON.parse(localStorage.getItem("curhat")||"[]");
data.forEach(d=>{
list.innerHTML += `
<p><b>Cerita:</b> ${d.pesan}<br>
<b>Status:</b> ${d.jawaban? "Sudah dibalas":"Menunggu"}<br>
<b>Balasan:</b> ${d.jawaban||"-"}</p><hr>`;
});
}

function login(){
if(password.value === COUNSELOR_PASSWORD){
loginKonselor.classList.add("hidden");
panelKonselor.classList.remove("hidden");
loadKonselor();
}else{
alert("Password salah");
}
}

function loadKonselor(){
let box = document.getElementById("pesanMasuk");
let data = JSON.parse(localStorage.getItem("curhat")||"[]");
box.innerHTML="";
let count = 0;

data.forEach(d=>{
if(!d.jawaban){
count++;
box.innerHTML += `
<p>${d.pesan}</p>
<textarea id="j${d.id}" placeholder="Balas..."></textarea>
<button onclick="balas(${d.id})">Kirim Balasan</button><hr>`;
}
});

statistik.innerText = `Total curhat masuk: ${data.length}`;
}

function balas(id){
let data = JSON.parse(localStorage.getItem("curhat"));
let jawab = document.getElementById("j"+id).value;
data.forEach(d=>{ if(d.id==id) d.jawaban = jawab;});
localStorage.setItem("curhat", JSON.stringify(data));
loadKonselor();
}
</script>

</body>
</html>
